<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quantum Vault</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Quantum Vault 🛡️</h1>
  
  <section id="keys">
    <h2>1. Key Management</h2>
    <button id="genKeyBtn">🔑 Generate Key Pair</button>
    <label>Secret Key (.qkey) <input type="file" id="privKeyInput" accept=".qkey"></label>
    <label>Public Key (.qkey) <input type="file" id="pubKeyInput" accept=".qkey"></label>
  </section>

  <section id="crypto">
    <h2>2. Encryption / Decryption</h2>
    <label>File for operations <input type="file" id="dataFileInput" multiple></label>
    <button id="encBtn">🔒 Encrypt</button>
    <button id="decBtn">🔓 Decrypt</button>
  </section>

  <section id="qcont">
    <h2>3. Build / Restore .qcont Shards (Reed-Solomon + Shamir's Secret Sharing)</h2>
    <div>
      <label>Encrypted container (.qenc) to split <input type="file" id="qencForQcontInput" accept=".qenc"></label>
    </div>
    <div>
      <label>Private key (.qkey) to split <input type="file" id="privKeyForQcontInput" accept=".qkey"></label>
    </div>
    <div id="rsParams">
      <label>Total shards (n) <input type="number" id="rsN" value="4" min="3"></label>
      <label>RS data shards (k) <input type="number" id="rsK" value="2" min="2"></label>
      <small id="rsText">n=?, k=?, m=?, t=?; Need ≥ t shards to restore.</small>
      <div id="rsViz" aria-hidden="true">
        <div class="rs-bar">
          <span class="rs-seg data" id="rsSegData"></span>
          <span class="rs-seg parity" id="rsSegParity"></span>
          <span class="rs-marker" id="rsMarker"></span>
        </div>
        <div class="rs-legend">
          <span class="swatch data"></span> Data k
          <span class="swatch parity"></span> Parity m
          <span class="swatch marker"></span> Threshold t
        </div>
      </div>
      <small>Tip: More availability = reduce k or t; More confidentiality = increase m. If someone controls t shards they can decrypt; with fewer than t shards they cannot.</small>
    </div>
    <button id="buildQcontBtn">🧩 Build .qcont shards</button>
    <hr>
    <div>
      <label>.qcont shards <input type="file" id="qcontShardsInput" accept=".qcont" multiple></label>
    </div>
    <button id="restoreQcontBtn">♻️ Restore & Decrypt</button>
  </section>

  <section>
    <h2>Operations Log</h2>
    <pre id="log"></pre>
  </section>

  <script src="/third-party/erasure.js"></script>
  <script type="module" src="/src/main.js"></script>
</body>
</html>
